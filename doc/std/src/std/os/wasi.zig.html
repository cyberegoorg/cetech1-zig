<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <title>os/wasi.zig - source view</title>
    <link rel="icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAgklEQVR4AWMYWuD7EllJIM4G4g4g5oIJ/odhOJ8wToOxSTXgNxDHoeiBMfA4+wGShjyYOCkG/IGqWQziEzYAoUAeiF9D5U+DxEg14DRU7jWIT5IBIOdCxf+A+CQZAAoopEB7QJwBCBwHiip8UYmRdrAlDpIMgApwQZNnNii5Dq0MBgCxxycBnwEd+wAAAABJRU5ErkJggg==">
    <link rel="icon" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNTMgMTQwIj48ZyBmaWxsPSIjRjdBNDFEIj48Zz48cG9seWdvbiBwb2ludHM9IjQ2LDIyIDI4LDQ0IDE5LDMwIi8+PHBvbHlnb24gcG9pbnRzPSI0NiwyMiAzMywzMyAyOCw0NCAyMiw0NCAyMiw5NSAzMSw5NSAyMCwxMDAgMTIsMTE3IDAsMTE3IDAsMjIiIHNoYXBlLXJlbmRlcmluZz0iY3Jpc3BFZGdlcyIvPjxwb2x5Z29uIHBvaW50cz0iMzEsOTUgMTIsMTE3IDQsMTA2Ii8+PC9nPjxnPjxwb2x5Z29uIHBvaW50cz0iNTYsMjIgNjIsMzYgMzcsNDQiLz48cG9seWdvbiBwb2ludHM9IjU2LDIyIDExMSwyMiAxMTEsNDQgMzcsNDQgNTYsMzIiIHNoYXBlLXJlbmRlcmluZz0iY3Jpc3BFZGdlcyIvPjxwb2x5Z29uIHBvaW50cz0iMTE2LDk1IDk3LDExNyA5MCwxMDQiLz48cG9seWdvbiBwb2ludHM9IjExNiw5NSAxMDAsMTA0IDk3LDExNyA0MiwxMTcgNDIsOTUiIHNoYXBlLXJlbmRlcmluZz0iY3Jpc3BFZGdlcyIvPjxwb2x5Z29uIHBvaW50cz0iMTUwLDAgNTIsMTE3IDMsMTQwIDEwMSwyMiIvPjwvZz48Zz48cG9seWdvbiBwb2ludHM9IjE0MSwyMiAxNDAsNDAgMTIyLDQ1Ii8+PHBvbHlnb24gcG9pbnRzPSIxNTMsMjIgMTUzLDExNyAxMDYsMTE3IDEyMCwxMDUgMTI1LDk1IDEzMSw5NSAxMzEsNDUgMTIyLDQ1IDEzMiwzNiAxNDEsMjIiIHNoYXBlLXJlbmRlcmluZz0iY3Jpc3BFZGdlcyIvPjxwb2x5Z29uIHBvaW50cz0iMTI1LDk1IDEzMCwxMTAgMTA2LDExNyIvPjwvZz48L2c+PC9zdmc+">
    <style>
      body{
        font-family: system-ui, -apple-system, Roboto, "Segoe UI", sans-serif;
        margin: 0;
        line-height: 1.5;
      }

      pre > code {
        display: block;
        overflow: auto;
        line-height: normal;
        margin: 0em;
      }
      .tok-kw {
          color: #333;
          font-weight: bold;
      }
      .tok-str {
          color: #d14;
      }
      .tok-builtin {
          color: #005C7A;
      }
      .tok-comment {
          color: #545454;
          font-style: italic;
      }
      .tok-fn {
          color: #900;
          font-weight: bold;
      }
      .tok-null {
          color: #005C5C;
      }
      .tok-number {
          color: #005C5C;
      }
      .tok-type {
          color: #458;
          font-weight: bold;
      }
      pre {
        counter-reset: line;
      }
      pre .line:before {
        counter-increment: line;
        content: counter(line);
        display: inline-block;
        padding-right: 1em;
        width: 2em;
        text-align: right;
        color: #999;
      }
      
      .line {
        width: 100%;
        display: inline-block;
      }
      .line:target {
        border-top: 1px solid #ccc;
        border-bottom: 1px solid #ccc;
        background: #fafafa;
      }

      @media (prefers-color-scheme: dark) {
        body{
            background:#222;
            color: #ccc;
        }
        pre > code {
            color: #ccc;
            background: #222;
            border: unset;
        }
        .line:target {
            border-top: 1px solid #444;
            border-bottom: 1px solid #444;
            background: #333;
        }
        .tok-kw {
            color: #eee;
        }
        .tok-str {
            color: #2e5;
        }
        .tok-builtin {
            color: #ff894c;
        }
        .tok-comment {
            color: #aa7;
        }
        .tok-fn {
            color: #B1A0F8;
        }
        .tok-null {
            color: #ff8080;
        }
        .tok-number {
            color: #ff8080;
        }
        .tok-type {
            color: #68f;
        }
      }
    </style>
</head>
<body>
<pre><code><span class="line" id="L1"><span class="tok-comment">//! wasi_snapshot_preview1 spec available (in witx format) here:</span></span>
<span class="line" id="L2"><span class="tok-comment">//! * typenames -- https://github.com/WebAssembly/WASI/blob/main/legacy/preview1/witx/typenames.witx</span></span>
<span class="line" id="L3"><span class="tok-comment">//! * module -- https://github.com/WebAssembly/WASI/blob/main/legacy/preview1/witx/wasi_snapshot_preview1.witx</span></span>
<span class="line" id="L4"><span class="tok-comment">//! Note that libc API does *not* go in this file. wasi libc API goes into std/c/wasi.zig instead.</span></span>
<span class="line" id="L5"><span class="tok-kw">const</span> builtin = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;builtin&quot;</span>);</span>
<span class="line" id="L6"><span class="tok-kw">const</span> std = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;std&quot;</span>);</span>
<span class="line" id="L7"><span class="tok-kw">const</span> assert = std.debug.assert;</span>
<span class="line" id="L8"></span>
<span class="line" id="L9"><span class="tok-kw">comptime</span> {</span>
<span class="line" id="L10">    assert(<span class="tok-builtin">@alignOf</span>(<span class="tok-type">i8</span>) == <span class="tok-number">1</span>);</span>
<span class="line" id="L11">    assert(<span class="tok-builtin">@alignOf</span>(<span class="tok-type">u8</span>) == <span class="tok-number">1</span>);</span>
<span class="line" id="L12">    assert(<span class="tok-builtin">@alignOf</span>(<span class="tok-type">i16</span>) == <span class="tok-number">2</span>);</span>
<span class="line" id="L13">    assert(<span class="tok-builtin">@alignOf</span>(<span class="tok-type">u16</span>) == <span class="tok-number">2</span>);</span>
<span class="line" id="L14">    assert(<span class="tok-builtin">@alignOf</span>(<span class="tok-type">i32</span>) == <span class="tok-number">4</span>);</span>
<span class="line" id="L15">    assert(<span class="tok-builtin">@alignOf</span>(<span class="tok-type">u32</span>) == <span class="tok-number">4</span>);</span>
<span class="line" id="L16">    <span class="tok-comment">// assert(@alignOf(i64) == 8);</span>
</span>
<span class="line" id="L17">    <span class="tok-comment">// assert(@alignOf(u64) == 8);</span>
</span>
<span class="line" id="L18">}</span>
<span class="line" id="L19"></span>
<span class="line" id="L20"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> iovec_t = std.os.iovec;</span>
<span class="line" id="L21"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> ciovec_t = std.os.iovec_const;</span>
<span class="line" id="L22"></span>
<span class="line" id="L23"><span class="tok-kw">pub</span> <span class="tok-kw">extern</span> <span class="tok-str">&quot;wasi_snapshot_preview1&quot;</span> <span class="tok-kw">fn</span> <span class="tok-fn">args_get</span>(argv: [*][*:<span class="tok-number">0</span>]<span class="tok-type">u8</span>, argv_buf: [*]<span class="tok-type">u8</span>) errno_t;</span>
<span class="line" id="L24"><span class="tok-kw">pub</span> <span class="tok-kw">extern</span> <span class="tok-str">&quot;wasi_snapshot_preview1&quot;</span> <span class="tok-kw">fn</span> <span class="tok-fn">args_sizes_get</span>(argc: *<span class="tok-type">usize</span>, argv_buf_size: *<span class="tok-type">usize</span>) errno_t;</span>
<span class="line" id="L25"></span>
<span class="line" id="L26"><span class="tok-kw">pub</span> <span class="tok-kw">extern</span> <span class="tok-str">&quot;wasi_snapshot_preview1&quot;</span> <span class="tok-kw">fn</span> <span class="tok-fn">clock_res_get</span>(clock_id: clockid_t, resolution: *timestamp_t) errno_t;</span>
<span class="line" id="L27"><span class="tok-kw">pub</span> <span class="tok-kw">extern</span> <span class="tok-str">&quot;wasi_snapshot_preview1&quot;</span> <span class="tok-kw">fn</span> <span class="tok-fn">clock_time_get</span>(clock_id: clockid_t, precision: timestamp_t, timestamp: *timestamp_t) errno_t;</span>
<span class="line" id="L28"></span>
<span class="line" id="L29"><span class="tok-kw">pub</span> <span class="tok-kw">extern</span> <span class="tok-str">&quot;wasi_snapshot_preview1&quot;</span> <span class="tok-kw">fn</span> <span class="tok-fn">environ_get</span>(environ: [*][*:<span class="tok-number">0</span>]<span class="tok-type">u8</span>, environ_buf: [*]<span class="tok-type">u8</span>) errno_t;</span>
<span class="line" id="L30"><span class="tok-kw">pub</span> <span class="tok-kw">extern</span> <span class="tok-str">&quot;wasi_snapshot_preview1&quot;</span> <span class="tok-kw">fn</span> <span class="tok-fn">environ_sizes_get</span>(environ_count: *<span class="tok-type">usize</span>, environ_buf_size: *<span class="tok-type">usize</span>) errno_t;</span>
<span class="line" id="L31"></span>
<span class="line" id="L32"><span class="tok-kw">pub</span> <span class="tok-kw">extern</span> <span class="tok-str">&quot;wasi_snapshot_preview1&quot;</span> <span class="tok-kw">fn</span> <span class="tok-fn">fd_advise</span>(fd: fd_t, offset: filesize_t, len: filesize_t, advice: advice_t) errno_t;</span>
<span class="line" id="L33"><span class="tok-kw">pub</span> <span class="tok-kw">extern</span> <span class="tok-str">&quot;wasi_snapshot_preview1&quot;</span> <span class="tok-kw">fn</span> <span class="tok-fn">fd_allocate</span>(fd: fd_t, offset: filesize_t, len: filesize_t) errno_t;</span>
<span class="line" id="L34"><span class="tok-kw">pub</span> <span class="tok-kw">extern</span> <span class="tok-str">&quot;wasi_snapshot_preview1&quot;</span> <span class="tok-kw">fn</span> <span class="tok-fn">fd_close</span>(fd: fd_t) errno_t;</span>
<span class="line" id="L35"><span class="tok-kw">pub</span> <span class="tok-kw">extern</span> <span class="tok-str">&quot;wasi_snapshot_preview1&quot;</span> <span class="tok-kw">fn</span> <span class="tok-fn">fd_datasync</span>(fd: fd_t) errno_t;</span>
<span class="line" id="L36"><span class="tok-kw">pub</span> <span class="tok-kw">extern</span> <span class="tok-str">&quot;wasi_snapshot_preview1&quot;</span> <span class="tok-kw">fn</span> <span class="tok-fn">fd_pread</span>(fd: fd_t, iovs: [*]<span class="tok-kw">const</span> iovec_t, iovs_len: <span class="tok-type">usize</span>, offset: filesize_t, nread: *<span class="tok-type">usize</span>) errno_t;</span>
<span class="line" id="L37"><span class="tok-kw">pub</span> <span class="tok-kw">extern</span> <span class="tok-str">&quot;wasi_snapshot_preview1&quot;</span> <span class="tok-kw">fn</span> <span class="tok-fn">fd_pwrite</span>(fd: fd_t, iovs: [*]<span class="tok-kw">const</span> ciovec_t, iovs_len: <span class="tok-type">usize</span>, offset: filesize_t, nwritten: *<span class="tok-type">usize</span>) errno_t;</span>
<span class="line" id="L38"><span class="tok-kw">pub</span> <span class="tok-kw">extern</span> <span class="tok-str">&quot;wasi_snapshot_preview1&quot;</span> <span class="tok-kw">fn</span> <span class="tok-fn">fd_read</span>(fd: fd_t, iovs: [*]<span class="tok-kw">const</span> iovec_t, iovs_len: <span class="tok-type">usize</span>, nread: *<span class="tok-type">usize</span>) errno_t;</span>
<span class="line" id="L39"><span class="tok-kw">pub</span> <span class="tok-kw">extern</span> <span class="tok-str">&quot;wasi_snapshot_preview1&quot;</span> <span class="tok-kw">fn</span> <span class="tok-fn">fd_readdir</span>(fd: fd_t, buf: [*]<span class="tok-type">u8</span>, buf_len: <span class="tok-type">usize</span>, cookie: dircookie_t, bufused: *<span class="tok-type">usize</span>) errno_t;</span>
<span class="line" id="L40"><span class="tok-kw">pub</span> <span class="tok-kw">extern</span> <span class="tok-str">&quot;wasi_snapshot_preview1&quot;</span> <span class="tok-kw">fn</span> <span class="tok-fn">fd_renumber</span>(from: fd_t, to: fd_t) errno_t;</span>
<span class="line" id="L41"><span class="tok-kw">pub</span> <span class="tok-kw">extern</span> <span class="tok-str">&quot;wasi_snapshot_preview1&quot;</span> <span class="tok-kw">fn</span> <span class="tok-fn">fd_seek</span>(fd: fd_t, offset: filedelta_t, whence: whence_t, newoffset: *filesize_t) errno_t;</span>
<span class="line" id="L42"><span class="tok-kw">pub</span> <span class="tok-kw">extern</span> <span class="tok-str">&quot;wasi_snapshot_preview1&quot;</span> <span class="tok-kw">fn</span> <span class="tok-fn">fd_sync</span>(fd: fd_t) errno_t;</span>
<span class="line" id="L43"><span class="tok-kw">pub</span> <span class="tok-kw">extern</span> <span class="tok-str">&quot;wasi_snapshot_preview1&quot;</span> <span class="tok-kw">fn</span> <span class="tok-fn">fd_tell</span>(fd: fd_t, newoffset: *filesize_t) errno_t;</span>
<span class="line" id="L44"><span class="tok-kw">pub</span> <span class="tok-kw">extern</span> <span class="tok-str">&quot;wasi_snapshot_preview1&quot;</span> <span class="tok-kw">fn</span> <span class="tok-fn">fd_write</span>(fd: fd_t, iovs: [*]<span class="tok-kw">const</span> ciovec_t, iovs_len: <span class="tok-type">usize</span>, nwritten: *<span class="tok-type">usize</span>) errno_t;</span>
<span class="line" id="L45"></span>
<span class="line" id="L46"><span class="tok-kw">pub</span> <span class="tok-kw">extern</span> <span class="tok-str">&quot;wasi_snapshot_preview1&quot;</span> <span class="tok-kw">fn</span> <span class="tok-fn">fd_fdstat_get</span>(fd: fd_t, buf: *fdstat_t) errno_t;</span>
<span class="line" id="L47"><span class="tok-kw">pub</span> <span class="tok-kw">extern</span> <span class="tok-str">&quot;wasi_snapshot_preview1&quot;</span> <span class="tok-kw">fn</span> <span class="tok-fn">fd_fdstat_set_flags</span>(fd: fd_t, flags: fdflags_t) errno_t;</span>
<span class="line" id="L48"><span class="tok-kw">pub</span> <span class="tok-kw">extern</span> <span class="tok-str">&quot;wasi_snapshot_preview1&quot;</span> <span class="tok-kw">fn</span> <span class="tok-fn">fd_fdstat_set_rights</span>(fd: fd_t, fs_rights_base: rights_t, fs_rights_inheriting: rights_t) errno_t;</span>
<span class="line" id="L49"></span>
<span class="line" id="L50"><span class="tok-kw">pub</span> <span class="tok-kw">extern</span> <span class="tok-str">&quot;wasi_snapshot_preview1&quot;</span> <span class="tok-kw">fn</span> <span class="tok-fn">fd_filestat_get</span>(fd: fd_t, buf: *filestat_t) errno_t;</span>
<span class="line" id="L51"><span class="tok-kw">pub</span> <span class="tok-kw">extern</span> <span class="tok-str">&quot;wasi_snapshot_preview1&quot;</span> <span class="tok-kw">fn</span> <span class="tok-fn">fd_filestat_set_size</span>(fd: fd_t, st_size: filesize_t) errno_t;</span>
<span class="line" id="L52"><span class="tok-kw">pub</span> <span class="tok-kw">extern</span> <span class="tok-str">&quot;wasi_snapshot_preview1&quot;</span> <span class="tok-kw">fn</span> <span class="tok-fn">fd_filestat_set_times</span>(fd: fd_t, st_atim: timestamp_t, st_mtim: timestamp_t, fstflags: fstflags_t) errno_t;</span>
<span class="line" id="L53"></span>
<span class="line" id="L54"><span class="tok-kw">pub</span> <span class="tok-kw">extern</span> <span class="tok-str">&quot;wasi_snapshot_preview1&quot;</span> <span class="tok-kw">fn</span> <span class="tok-fn">fd_prestat_get</span>(fd: fd_t, buf: *prestat_t) errno_t;</span>
<span class="line" id="L55"><span class="tok-kw">pub</span> <span class="tok-kw">extern</span> <span class="tok-str">&quot;wasi_snapshot_preview1&quot;</span> <span class="tok-kw">fn</span> <span class="tok-fn">fd_prestat_dir_name</span>(fd: fd_t, path: [*]<span class="tok-type">u8</span>, path_len: <span class="tok-type">usize</span>) errno_t;</span>
<span class="line" id="L56"></span>
<span class="line" id="L57"><span class="tok-kw">pub</span> <span class="tok-kw">extern</span> <span class="tok-str">&quot;wasi_snapshot_preview1&quot;</span> <span class="tok-kw">fn</span> <span class="tok-fn">path_create_directory</span>(fd: fd_t, path: [*]<span class="tok-kw">const</span> <span class="tok-type">u8</span>, path_len: <span class="tok-type">usize</span>) errno_t;</span>
<span class="line" id="L58"><span class="tok-kw">pub</span> <span class="tok-kw">extern</span> <span class="tok-str">&quot;wasi_snapshot_preview1&quot;</span> <span class="tok-kw">fn</span> <span class="tok-fn">path_filestat_get</span>(fd: fd_t, flags: lookupflags_t, path: [*]<span class="tok-kw">const</span> <span class="tok-type">u8</span>, path_len: <span class="tok-type">usize</span>, buf: *filestat_t) errno_t;</span>
<span class="line" id="L59"><span class="tok-kw">pub</span> <span class="tok-kw">extern</span> <span class="tok-str">&quot;wasi_snapshot_preview1&quot;</span> <span class="tok-kw">fn</span> <span class="tok-fn">path_filestat_set_times</span>(fd: fd_t, flags: lookupflags_t, path: [*]<span class="tok-kw">const</span> <span class="tok-type">u8</span>, path_len: <span class="tok-type">usize</span>, st_atim: timestamp_t, st_mtim: timestamp_t, fstflags: fstflags_t) errno_t;</span>
<span class="line" id="L60"><span class="tok-kw">pub</span> <span class="tok-kw">extern</span> <span class="tok-str">&quot;wasi_snapshot_preview1&quot;</span> <span class="tok-kw">fn</span> <span class="tok-fn">path_link</span>(old_fd: fd_t, old_flags: lookupflags_t, old_path: [*]<span class="tok-kw">const</span> <span class="tok-type">u8</span>, old_path_len: <span class="tok-type">usize</span>, new_fd: fd_t, new_path: [*]<span class="tok-kw">const</span> <span class="tok-type">u8</span>, new_path_len: <span class="tok-type">usize</span>) errno_t;</span>
<span class="line" id="L61"><span class="tok-kw">pub</span> <span class="tok-kw">extern</span> <span class="tok-str">&quot;wasi_snapshot_preview1&quot;</span> <span class="tok-kw">fn</span> <span class="tok-fn">path_open</span>(dirfd: fd_t, dirflags: lookupflags_t, path: [*]<span class="tok-kw">const</span> <span class="tok-type">u8</span>, path_len: <span class="tok-type">usize</span>, oflags: oflags_t, fs_rights_base: rights_t, fs_rights_inheriting: rights_t, fs_flags: fdflags_t, fd: *fd_t) errno_t;</span>
<span class="line" id="L62"><span class="tok-kw">pub</span> <span class="tok-kw">extern</span> <span class="tok-str">&quot;wasi_snapshot_preview1&quot;</span> <span class="tok-kw">fn</span> <span class="tok-fn">path_readlink</span>(fd: fd_t, path: [*]<span class="tok-kw">const</span> <span class="tok-type">u8</span>, path_len: <span class="tok-type">usize</span>, buf: [*]<span class="tok-type">u8</span>, buf_len: <span class="tok-type">usize</span>, bufused: *<span class="tok-type">usize</span>) errno_t;</span>
<span class="line" id="L63"><span class="tok-kw">pub</span> <span class="tok-kw">extern</span> <span class="tok-str">&quot;wasi_snapshot_preview1&quot;</span> <span class="tok-kw">fn</span> <span class="tok-fn">path_remove_directory</span>(fd: fd_t, path: [*]<span class="tok-kw">const</span> <span class="tok-type">u8</span>, path_len: <span class="tok-type">usize</span>) errno_t;</span>
<span class="line" id="L64"><span class="tok-kw">pub</span> <span class="tok-kw">extern</span> <span class="tok-str">&quot;wasi_snapshot_preview1&quot;</span> <span class="tok-kw">fn</span> <span class="tok-fn">path_rename</span>(old_fd: fd_t, old_path: [*]<span class="tok-kw">const</span> <span class="tok-type">u8</span>, old_path_len: <span class="tok-type">usize</span>, new_fd: fd_t, new_path: [*]<span class="tok-kw">const</span> <span class="tok-type">u8</span>, new_path_len: <span class="tok-type">usize</span>) errno_t;</span>
<span class="line" id="L65"><span class="tok-kw">pub</span> <span class="tok-kw">extern</span> <span class="tok-str">&quot;wasi_snapshot_preview1&quot;</span> <span class="tok-kw">fn</span> <span class="tok-fn">path_symlink</span>(old_path: [*]<span class="tok-kw">const</span> <span class="tok-type">u8</span>, old_path_len: <span class="tok-type">usize</span>, fd: fd_t, new_path: [*]<span class="tok-kw">const</span> <span class="tok-type">u8</span>, new_path_len: <span class="tok-type">usize</span>) errno_t;</span>
<span class="line" id="L66"><span class="tok-kw">pub</span> <span class="tok-kw">extern</span> <span class="tok-str">&quot;wasi_snapshot_preview1&quot;</span> <span class="tok-kw">fn</span> <span class="tok-fn">path_unlink_file</span>(fd: fd_t, path: [*]<span class="tok-kw">const</span> <span class="tok-type">u8</span>, path_len: <span class="tok-type">usize</span>) errno_t;</span>
<span class="line" id="L67"></span>
<span class="line" id="L68"><span class="tok-kw">pub</span> <span class="tok-kw">extern</span> <span class="tok-str">&quot;wasi_snapshot_preview1&quot;</span> <span class="tok-kw">fn</span> <span class="tok-fn">poll_oneoff</span>(in: *<span class="tok-kw">const</span> subscription_t, out: *event_t, nsubscriptions: <span class="tok-type">usize</span>, nevents: *<span class="tok-type">usize</span>) errno_t;</span>
<span class="line" id="L69"></span>
<span class="line" id="L70"><span class="tok-kw">pub</span> <span class="tok-kw">extern</span> <span class="tok-str">&quot;wasi_snapshot_preview1&quot;</span> <span class="tok-kw">fn</span> <span class="tok-fn">proc_exit</span>(rval: exitcode_t) <span class="tok-type">noreturn</span>;</span>
<span class="line" id="L71"></span>
<span class="line" id="L72"><span class="tok-kw">pub</span> <span class="tok-kw">extern</span> <span class="tok-str">&quot;wasi_snapshot_preview1&quot;</span> <span class="tok-kw">fn</span> <span class="tok-fn">random_get</span>(buf: [*]<span class="tok-type">u8</span>, buf_len: <span class="tok-type">usize</span>) errno_t;</span>
<span class="line" id="L73"></span>
<span class="line" id="L74"><span class="tok-kw">pub</span> <span class="tok-kw">extern</span> <span class="tok-str">&quot;wasi_snapshot_preview1&quot;</span> <span class="tok-kw">fn</span> <span class="tok-fn">sched_yield</span>() errno_t;</span>
<span class="line" id="L75"></span>
<span class="line" id="L76"><span class="tok-kw">pub</span> <span class="tok-kw">extern</span> <span class="tok-str">&quot;wasi_snapshot_preview1&quot;</span> <span class="tok-kw">fn</span> <span class="tok-fn">sock_accept</span>(sock: fd_t, flags: fdflags_t, result_fd: *fd_t) errno_t;</span>
<span class="line" id="L77"><span class="tok-kw">pub</span> <span class="tok-kw">extern</span> <span class="tok-str">&quot;wasi_snapshot_preview1&quot;</span> <span class="tok-kw">fn</span> <span class="tok-fn">sock_recv</span>(sock: fd_t, ri_data: [*]iovec_t, ri_data_len: <span class="tok-type">usize</span>, ri_flags: riflags_t, ro_datalen: *<span class="tok-type">usize</span>, ro_flags: *roflags_t) errno_t;</span>
<span class="line" id="L78"><span class="tok-kw">pub</span> <span class="tok-kw">extern</span> <span class="tok-str">&quot;wasi_snapshot_preview1&quot;</span> <span class="tok-kw">fn</span> <span class="tok-fn">sock_send</span>(sock: fd_t, si_data: [*]<span class="tok-kw">const</span> ciovec_t, si_data_len: <span class="tok-type">usize</span>, si_flags: siflags_t, so_datalen: *<span class="tok-type">usize</span>) errno_t;</span>
<span class="line" id="L79"><span class="tok-kw">pub</span> <span class="tok-kw">extern</span> <span class="tok-str">&quot;wasi_snapshot_preview1&quot;</span> <span class="tok-kw">fn</span> <span class="tok-fn">sock_shutdown</span>(sock: fd_t, how: sdflags_t) errno_t;</span>
<span class="line" id="L80"></span>
<span class="line" id="L81"><span class="tok-comment">// As defined in the wasi_snapshot_preview1 spec file:</span>
</span>
<span class="line" id="L82"><span class="tok-comment">// https://github.com/WebAssembly/WASI/blob/master/phases/snapshot/witx/typenames.witx</span>
</span>
<span class="line" id="L83"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> advice_t = <span class="tok-kw">enum</span>(<span class="tok-type">u8</span>) {</span>
<span class="line" id="L84">    NORMAL = <span class="tok-number">0</span>,</span>
<span class="line" id="L85">    SEQUENTIAL = <span class="tok-number">1</span>,</span>
<span class="line" id="L86">    RANDOM = <span class="tok-number">2</span>,</span>
<span class="line" id="L87">    WILLNEED = <span class="tok-number">3</span>,</span>
<span class="line" id="L88">    DONTNEED = <span class="tok-number">4</span>,</span>
<span class="line" id="L89">    NOREUSE = <span class="tok-number">5</span>,</span>
<span class="line" id="L90">};</span>
<span class="line" id="L91"></span>
<span class="line" id="L92"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> clockid_t = <span class="tok-kw">enum</span>(<span class="tok-type">u32</span>) {</span>
<span class="line" id="L93">    REALTIME = <span class="tok-number">0</span>,</span>
<span class="line" id="L94">    MONOTONIC = <span class="tok-number">1</span>,</span>
<span class="line" id="L95">    PROCESS_CPUTIME_ID = <span class="tok-number">2</span>,</span>
<span class="line" id="L96">    THREAD_CPUTIME_ID = <span class="tok-number">3</span>,</span>
<span class="line" id="L97">};</span>
<span class="line" id="L98"></span>
<span class="line" id="L99"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> device_t = <span class="tok-type">u64</span>;</span>
<span class="line" id="L100"></span>
<span class="line" id="L101"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> dircookie_t = <span class="tok-type">u64</span>;</span>
<span class="line" id="L102"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> DIRCOOKIE_START: dircookie_t = <span class="tok-number">0</span>;</span>
<span class="line" id="L103"></span>
<span class="line" id="L104"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> dirnamlen_t = <span class="tok-type">u32</span>;</span>
<span class="line" id="L105"></span>
<span class="line" id="L106"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> dirent_t = <span class="tok-kw">extern</span> <span class="tok-kw">struct</span> {</span>
<span class="line" id="L107">    next: dircookie_t,</span>
<span class="line" id="L108">    ino: inode_t,</span>
<span class="line" id="L109">    namlen: dirnamlen_t,</span>
<span class="line" id="L110">    <span class="tok-type">type</span>: filetype_t,</span>
<span class="line" id="L111">};</span>
<span class="line" id="L112"></span>
<span class="line" id="L113"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> errno_t = <span class="tok-kw">enum</span>(<span class="tok-type">u16</span>) {</span>
<span class="line" id="L114">    SUCCESS = <span class="tok-number">0</span>,</span>
<span class="line" id="L115">    @&quot;2BIG&quot; = <span class="tok-number">1</span>,</span>
<span class="line" id="L116">    ACCES = <span class="tok-number">2</span>,</span>
<span class="line" id="L117">    ADDRINUSE = <span class="tok-number">3</span>,</span>
<span class="line" id="L118">    ADDRNOTAVAIL = <span class="tok-number">4</span>,</span>
<span class="line" id="L119">    AFNOSUPPORT = <span class="tok-number">5</span>,</span>
<span class="line" id="L120">    <span class="tok-comment">/// This is also the error code used for `WOULDBLOCK`.</span></span>
<span class="line" id="L121">    AGAIN = <span class="tok-number">6</span>,</span>
<span class="line" id="L122">    ALREADY = <span class="tok-number">7</span>,</span>
<span class="line" id="L123">    BADF = <span class="tok-number">8</span>,</span>
<span class="line" id="L124">    BADMSG = <span class="tok-number">9</span>,</span>
<span class="line" id="L125">    BUSY = <span class="tok-number">10</span>,</span>
<span class="line" id="L126">    CANCELED = <span class="tok-number">11</span>,</span>
<span class="line" id="L127">    CHILD = <span class="tok-number">12</span>,</span>
<span class="line" id="L128">    CONNABORTED = <span class="tok-number">13</span>,</span>
<span class="line" id="L129">    CONNREFUSED = <span class="tok-number">14</span>,</span>
<span class="line" id="L130">    CONNRESET = <span class="tok-number">15</span>,</span>
<span class="line" id="L131">    DEADLK = <span class="tok-number">16</span>,</span>
<span class="line" id="L132">    DESTADDRREQ = <span class="tok-number">17</span>,</span>
<span class="line" id="L133">    DOM = <span class="tok-number">18</span>,</span>
<span class="line" id="L134">    DQUOT = <span class="tok-number">19</span>,</span>
<span class="line" id="L135">    EXIST = <span class="tok-number">20</span>,</span>
<span class="line" id="L136">    FAULT = <span class="tok-number">21</span>,</span>
<span class="line" id="L137">    FBIG = <span class="tok-number">22</span>,</span>
<span class="line" id="L138">    HOSTUNREACH = <span class="tok-number">23</span>,</span>
<span class="line" id="L139">    IDRM = <span class="tok-number">24</span>,</span>
<span class="line" id="L140">    ILSEQ = <span class="tok-number">25</span>,</span>
<span class="line" id="L141">    INPROGRESS = <span class="tok-number">26</span>,</span>
<span class="line" id="L142">    INTR = <span class="tok-number">27</span>,</span>
<span class="line" id="L143">    INVAL = <span class="tok-number">28</span>,</span>
<span class="line" id="L144">    IO = <span class="tok-number">29</span>,</span>
<span class="line" id="L145">    ISCONN = <span class="tok-number">30</span>,</span>
<span class="line" id="L146">    ISDIR = <span class="tok-number">31</span>,</span>
<span class="line" id="L147">    LOOP = <span class="tok-number">32</span>,</span>
<span class="line" id="L148">    MFILE = <span class="tok-number">33</span>,</span>
<span class="line" id="L149">    MLINK = <span class="tok-number">34</span>,</span>
<span class="line" id="L150">    MSGSIZE = <span class="tok-number">35</span>,</span>
<span class="line" id="L151">    MULTIHOP = <span class="tok-number">36</span>,</span>
<span class="line" id="L152">    NAMETOOLONG = <span class="tok-number">37</span>,</span>
<span class="line" id="L153">    NETDOWN = <span class="tok-number">38</span>,</span>
<span class="line" id="L154">    NETRESET = <span class="tok-number">39</span>,</span>
<span class="line" id="L155">    NETUNREACH = <span class="tok-number">40</span>,</span>
<span class="line" id="L156">    NFILE = <span class="tok-number">41</span>,</span>
<span class="line" id="L157">    NOBUFS = <span class="tok-number">42</span>,</span>
<span class="line" id="L158">    NODEV = <span class="tok-number">43</span>,</span>
<span class="line" id="L159">    NOENT = <span class="tok-number">44</span>,</span>
<span class="line" id="L160">    NOEXEC = <span class="tok-number">45</span>,</span>
<span class="line" id="L161">    NOLCK = <span class="tok-number">46</span>,</span>
<span class="line" id="L162">    NOLINK = <span class="tok-number">47</span>,</span>
<span class="line" id="L163">    NOMEM = <span class="tok-number">48</span>,</span>
<span class="line" id="L164">    NOMSG = <span class="tok-number">49</span>,</span>
<span class="line" id="L165">    NOPROTOOPT = <span class="tok-number">50</span>,</span>
<span class="line" id="L166">    NOSPC = <span class="tok-number">51</span>,</span>
<span class="line" id="L167">    NOSYS = <span class="tok-number">52</span>,</span>
<span class="line" id="L168">    NOTCONN = <span class="tok-number">53</span>,</span>
<span class="line" id="L169">    NOTDIR = <span class="tok-number">54</span>,</span>
<span class="line" id="L170">    NOTEMPTY = <span class="tok-number">55</span>,</span>
<span class="line" id="L171">    NOTRECOVERABLE = <span class="tok-number">56</span>,</span>
<span class="line" id="L172">    NOTSOCK = <span class="tok-number">57</span>,</span>
<span class="line" id="L173">    <span class="tok-comment">/// This is also the code used for `NOTSUP`.</span></span>
<span class="line" id="L174">    OPNOTSUPP = <span class="tok-number">58</span>,</span>
<span class="line" id="L175">    NOTTY = <span class="tok-number">59</span>,</span>
<span class="line" id="L176">    NXIO = <span class="tok-number">60</span>,</span>
<span class="line" id="L177">    OVERFLOW = <span class="tok-number">61</span>,</span>
<span class="line" id="L178">    OWNERDEAD = <span class="tok-number">62</span>,</span>
<span class="line" id="L179">    PERM = <span class="tok-number">63</span>,</span>
<span class="line" id="L180">    PIPE = <span class="tok-number">64</span>,</span>
<span class="line" id="L181">    PROTO = <span class="tok-number">65</span>,</span>
<span class="line" id="L182">    PROTONOSUPPORT = <span class="tok-number">66</span>,</span>
<span class="line" id="L183">    PROTOTYPE = <span class="tok-number">67</span>,</span>
<span class="line" id="L184">    RANGE = <span class="tok-number">68</span>,</span>
<span class="line" id="L185">    ROFS = <span class="tok-number">69</span>,</span>
<span class="line" id="L186">    SPIPE = <span class="tok-number">70</span>,</span>
<span class="line" id="L187">    SRCH = <span class="tok-number">71</span>,</span>
<span class="line" id="L188">    STALE = <span class="tok-number">72</span>,</span>
<span class="line" id="L189">    TIMEDOUT = <span class="tok-number">73</span>,</span>
<span class="line" id="L190">    TXTBSY = <span class="tok-number">74</span>,</span>
<span class="line" id="L191">    XDEV = <span class="tok-number">75</span>,</span>
<span class="line" id="L192">    NOTCAPABLE = <span class="tok-number">76</span>,</span>
<span class="line" id="L193">    _,</span>
<span class="line" id="L194">};</span>
<span class="line" id="L195"></span>
<span class="line" id="L196"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> event_t = <span class="tok-kw">extern</span> <span class="tok-kw">struct</span> {</span>
<span class="line" id="L197">    userdata: userdata_t,</span>
<span class="line" id="L198">    @&quot;error&quot;: errno_t,</span>
<span class="line" id="L199">    <span class="tok-type">type</span>: eventtype_t,</span>
<span class="line" id="L200">    fd_readwrite: eventfdreadwrite_t,</span>
<span class="line" id="L201">};</span>
<span class="line" id="L202"></span>
<span class="line" id="L203"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> eventfdreadwrite_t = <span class="tok-kw">extern</span> <span class="tok-kw">struct</span> {</span>
<span class="line" id="L204">    nbytes: filesize_t,</span>
<span class="line" id="L205">    flags: eventrwflags_t,</span>
<span class="line" id="L206">};</span>
<span class="line" id="L207"></span>
<span class="line" id="L208"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> eventrwflags_t = <span class="tok-type">u16</span>;</span>
<span class="line" id="L209"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> EVENT_FD_READWRITE_HANGUP: eventrwflags_t = <span class="tok-number">0x0001</span>;</span>
<span class="line" id="L210"></span>
<span class="line" id="L211"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> eventtype_t = <span class="tok-kw">enum</span>(<span class="tok-type">u8</span>) {</span>
<span class="line" id="L212">    CLOCK = <span class="tok-number">0</span>,</span>
<span class="line" id="L213">    FD_READ = <span class="tok-number">1</span>,</span>
<span class="line" id="L214">    FD_WRITE = <span class="tok-number">2</span>,</span>
<span class="line" id="L215">};</span>
<span class="line" id="L216"></span>
<span class="line" id="L217"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> exitcode_t = <span class="tok-type">u32</span>;</span>
<span class="line" id="L218"></span>
<span class="line" id="L219"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> fd_t = <span class="tok-type">i32</span>;</span>
<span class="line" id="L220"></span>
<span class="line" id="L221"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> fdflags_t = <span class="tok-kw">packed</span> <span class="tok-kw">struct</span>(<span class="tok-type">u16</span>) {</span>
<span class="line" id="L222">    APPEND: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L223">    DSYNC: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L224">    NONBLOCK: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L225">    RSYNC: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L226">    SYNC: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L227">    _: <span class="tok-type">u11</span> = <span class="tok-number">0</span>,</span>
<span class="line" id="L228">};</span>
<span class="line" id="L229"></span>
<span class="line" id="L230"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> fdstat_t = <span class="tok-kw">extern</span> <span class="tok-kw">struct</span> {</span>
<span class="line" id="L231">    fs_filetype: filetype_t,</span>
<span class="line" id="L232">    fs_flags: fdflags_t,</span>
<span class="line" id="L233">    fs_rights_base: rights_t,</span>
<span class="line" id="L234">    fs_rights_inheriting: rights_t,</span>
<span class="line" id="L235">};</span>
<span class="line" id="L236"></span>
<span class="line" id="L237"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> filedelta_t = <span class="tok-type">i64</span>;</span>
<span class="line" id="L238"></span>
<span class="line" id="L239"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> filesize_t = <span class="tok-type">u64</span>;</span>
<span class="line" id="L240"></span>
<span class="line" id="L241"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> filestat_t = <span class="tok-kw">extern</span> <span class="tok-kw">struct</span> {</span>
<span class="line" id="L242">    dev: device_t,</span>
<span class="line" id="L243">    ino: inode_t,</span>
<span class="line" id="L244">    filetype: filetype_t,</span>
<span class="line" id="L245">    nlink: linkcount_t,</span>
<span class="line" id="L246">    size: filesize_t,</span>
<span class="line" id="L247">    atim: timestamp_t,</span>
<span class="line" id="L248">    mtim: timestamp_t,</span>
<span class="line" id="L249">    ctim: timestamp_t,</span>
<span class="line" id="L250">};</span>
<span class="line" id="L251"></span>
<span class="line" id="L252"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> filetype_t = <span class="tok-kw">enum</span>(<span class="tok-type">u8</span>) {</span>
<span class="line" id="L253">    UNKNOWN,</span>
<span class="line" id="L254">    BLOCK_DEVICE,</span>
<span class="line" id="L255">    CHARACTER_DEVICE,</span>
<span class="line" id="L256">    DIRECTORY,</span>
<span class="line" id="L257">    REGULAR_FILE,</span>
<span class="line" id="L258">    SOCKET_DGRAM,</span>
<span class="line" id="L259">    SOCKET_STREAM,</span>
<span class="line" id="L260">    SYMBOLIC_LINK,</span>
<span class="line" id="L261">    _,</span>
<span class="line" id="L262">};</span>
<span class="line" id="L263"></span>
<span class="line" id="L264"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> fstflags_t = <span class="tok-kw">packed</span> <span class="tok-kw">struct</span>(<span class="tok-type">u16</span>) {</span>
<span class="line" id="L265">    ATIM: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L266">    ATIM_NOW: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L267">    MTIM: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L268">    MTIM_NOW: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L269">    _: <span class="tok-type">u12</span> = <span class="tok-number">0</span>,</span>
<span class="line" id="L270">};</span>
<span class="line" id="L271"></span>
<span class="line" id="L272"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> inode_t = <span class="tok-type">u64</span>;</span>
<span class="line" id="L273"></span>
<span class="line" id="L274"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> linkcount_t = <span class="tok-type">u64</span>;</span>
<span class="line" id="L275"></span>
<span class="line" id="L276"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> lookupflags_t = <span class="tok-kw">packed</span> <span class="tok-kw">struct</span>(<span class="tok-type">u32</span>) {</span>
<span class="line" id="L277">    SYMLINK_FOLLOW: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L278">    _: <span class="tok-type">u31</span> = <span class="tok-number">0</span>,</span>
<span class="line" id="L279">};</span>
<span class="line" id="L280"></span>
<span class="line" id="L281"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> oflags_t = <span class="tok-kw">packed</span> <span class="tok-kw">struct</span>(<span class="tok-type">u16</span>) {</span>
<span class="line" id="L282">    CREAT: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L283">    DIRECTORY: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L284">    EXCL: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L285">    TRUNC: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L286">    _: <span class="tok-type">u12</span> = <span class="tok-number">0</span>,</span>
<span class="line" id="L287">};</span>
<span class="line" id="L288"></span>
<span class="line" id="L289"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> preopentype_t = <span class="tok-type">u8</span>;</span>
<span class="line" id="L290"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> PREOPENTYPE_DIR: preopentype_t = <span class="tok-number">0</span>;</span>
<span class="line" id="L291"></span>
<span class="line" id="L292"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> prestat_t = <span class="tok-kw">extern</span> <span class="tok-kw">struct</span> {</span>
<span class="line" id="L293">    pr_type: preopentype_t,</span>
<span class="line" id="L294">    u: prestat_u_t,</span>
<span class="line" id="L295">};</span>
<span class="line" id="L296"></span>
<span class="line" id="L297"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> prestat_dir_t = <span class="tok-kw">extern</span> <span class="tok-kw">struct</span> {</span>
<span class="line" id="L298">    pr_name_len: <span class="tok-type">usize</span>,</span>
<span class="line" id="L299">};</span>
<span class="line" id="L300"></span>
<span class="line" id="L301"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> prestat_u_t = <span class="tok-kw">extern</span> <span class="tok-kw">union</span> {</span>
<span class="line" id="L302">    dir: prestat_dir_t,</span>
<span class="line" id="L303">};</span>
<span class="line" id="L304"></span>
<span class="line" id="L305"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> riflags_t = <span class="tok-type">u16</span>;</span>
<span class="line" id="L306"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> roflags_t = <span class="tok-type">u16</span>;</span>
<span class="line" id="L307"></span>
<span class="line" id="L308"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> SOCK = <span class="tok-kw">struct</span> {</span>
<span class="line" id="L309">    <span class="tok-kw">pub</span> <span class="tok-kw">const</span> RECV_PEEK: riflags_t = <span class="tok-number">0x0001</span>;</span>
<span class="line" id="L310">    <span class="tok-kw">pub</span> <span class="tok-kw">const</span> RECV_WAITALL: riflags_t = <span class="tok-number">0x0002</span>;</span>
<span class="line" id="L311"></span>
<span class="line" id="L312">    <span class="tok-kw">pub</span> <span class="tok-kw">const</span> RECV_DATA_TRUNCATED: roflags_t = <span class="tok-number">0x0001</span>;</span>
<span class="line" id="L313">};</span>
<span class="line" id="L314"></span>
<span class="line" id="L315"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> rights_t = <span class="tok-kw">packed</span> <span class="tok-kw">struct</span>(<span class="tok-type">u64</span>) {</span>
<span class="line" id="L316">    FD_DATASYNC: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L317">    FD_READ: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L318">    FD_SEEK: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L319">    FD_FDSTAT_SET_FLAGS: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L320">    FD_SYNC: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L321">    FD_TELL: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L322">    FD_WRITE: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L323">    FD_ADVISE: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L324">    FD_ALLOCATE: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L325">    PATH_CREATE_DIRECTORY: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L326">    PATH_CREATE_FILE: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L327">    PATH_LINK_SOURCE: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L328">    PATH_LINK_TARGET: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L329">    PATH_OPEN: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L330">    FD_READDIR: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L331">    PATH_READLINK: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L332">    PATH_RENAME_SOURCE: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L333">    PATH_RENAME_TARGET: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L334">    PATH_FILESTAT_GET: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L335">    PATH_FILESTAT_SET_SIZE: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L336">    PATH_FILESTAT_SET_TIMES: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L337">    FD_FILESTAT_GET: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L338">    FD_FILESTAT_SET_SIZE: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L339">    FD_FILESTAT_SET_TIMES: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L340">    PATH_SYMLINK: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L341">    PATH_REMOVE_DIRECTORY: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L342">    PATH_UNLINK_FILE: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L343">    POLL_FD_READWRITE: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L344">    SOCK_SHUTDOWN: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L345">    SOCK_ACCEPT: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L346">    _: <span class="tok-type">u34</span> = <span class="tok-number">0</span>,</span>
<span class="line" id="L347">};</span>
<span class="line" id="L348"></span>
<span class="line" id="L349"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> sdflags_t = <span class="tok-kw">packed</span> <span class="tok-kw">struct</span>(<span class="tok-type">u8</span>) {</span>
<span class="line" id="L350">    RD: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L351">    WR: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,</span>
<span class="line" id="L352">    _: <span class="tok-type">u6</span> = <span class="tok-number">0</span>,</span>
<span class="line" id="L353">};</span>
<span class="line" id="L354"></span>
<span class="line" id="L355"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> siflags_t = <span class="tok-type">u16</span>;</span>
<span class="line" id="L356"></span>
<span class="line" id="L357"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> signal_t = <span class="tok-kw">enum</span>(<span class="tok-type">u8</span>) {</span>
<span class="line" id="L358">    NONE = <span class="tok-number">0</span>,</span>
<span class="line" id="L359">    HUP = <span class="tok-number">1</span>,</span>
<span class="line" id="L360">    INT = <span class="tok-number">2</span>,</span>
<span class="line" id="L361">    QUIT = <span class="tok-number">3</span>,</span>
<span class="line" id="L362">    ILL = <span class="tok-number">4</span>,</span>
<span class="line" id="L363">    TRAP = <span class="tok-number">5</span>,</span>
<span class="line" id="L364">    ABRT = <span class="tok-number">6</span>,</span>
<span class="line" id="L365">    BUS = <span class="tok-number">7</span>,</span>
<span class="line" id="L366">    FPE = <span class="tok-number">8</span>,</span>
<span class="line" id="L367">    KILL = <span class="tok-number">9</span>,</span>
<span class="line" id="L368">    USR1 = <span class="tok-number">10</span>,</span>
<span class="line" id="L369">    SEGV = <span class="tok-number">11</span>,</span>
<span class="line" id="L370">    USR2 = <span class="tok-number">12</span>,</span>
<span class="line" id="L371">    PIPE = <span class="tok-number">13</span>,</span>
<span class="line" id="L372">    ALRM = <span class="tok-number">14</span>,</span>
<span class="line" id="L373">    TERM = <span class="tok-number">15</span>,</span>
<span class="line" id="L374">    CHLD = <span class="tok-number">16</span>,</span>
<span class="line" id="L375">    CONT = <span class="tok-number">17</span>,</span>
<span class="line" id="L376">    STOP = <span class="tok-number">18</span>,</span>
<span class="line" id="L377">    TSTP = <span class="tok-number">19</span>,</span>
<span class="line" id="L378">    TTIN = <span class="tok-number">20</span>,</span>
<span class="line" id="L379">    TTOU = <span class="tok-number">21</span>,</span>
<span class="line" id="L380">    URG = <span class="tok-number">22</span>,</span>
<span class="line" id="L381">    XCPU = <span class="tok-number">23</span>,</span>
<span class="line" id="L382">    XFSZ = <span class="tok-number">24</span>,</span>
<span class="line" id="L383">    VTALRM = <span class="tok-number">25</span>,</span>
<span class="line" id="L384">    PROF = <span class="tok-number">26</span>,</span>
<span class="line" id="L385">    WINCH = <span class="tok-number">27</span>,</span>
<span class="line" id="L386">    POLL = <span class="tok-number">28</span>,</span>
<span class="line" id="L387">    PWR = <span class="tok-number">29</span>,</span>
<span class="line" id="L388">    SYS = <span class="tok-number">30</span>,</span>
<span class="line" id="L389">};</span>
<span class="line" id="L390"></span>
<span class="line" id="L391"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> subclockflags_t = <span class="tok-type">u16</span>;</span>
<span class="line" id="L392"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> SUBSCRIPTION_CLOCK_ABSTIME: subclockflags_t = <span class="tok-number">0x0001</span>;</span>
<span class="line" id="L393"></span>
<span class="line" id="L394"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> subscription_t = <span class="tok-kw">extern</span> <span class="tok-kw">struct</span> {</span>
<span class="line" id="L395">    userdata: userdata_t,</span>
<span class="line" id="L396">    u: subscription_u_t,</span>
<span class="line" id="L397">};</span>
<span class="line" id="L398"></span>
<span class="line" id="L399"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> subscription_clock_t = <span class="tok-kw">extern</span> <span class="tok-kw">struct</span> {</span>
<span class="line" id="L400">    id: clockid_t,</span>
<span class="line" id="L401">    timeout: timestamp_t,</span>
<span class="line" id="L402">    precision: timestamp_t,</span>
<span class="line" id="L403">    flags: subclockflags_t,</span>
<span class="line" id="L404">};</span>
<span class="line" id="L405"></span>
<span class="line" id="L406"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> subscription_fd_readwrite_t = <span class="tok-kw">extern</span> <span class="tok-kw">struct</span> {</span>
<span class="line" id="L407">    fd: fd_t,</span>
<span class="line" id="L408">};</span>
<span class="line" id="L409"></span>
<span class="line" id="L410"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> subscription_u_t = <span class="tok-kw">extern</span> <span class="tok-kw">struct</span> {</span>
<span class="line" id="L411">    tag: eventtype_t,</span>
<span class="line" id="L412">    u: subscription_u_u_t,</span>
<span class="line" id="L413">};</span>
<span class="line" id="L414"></span>
<span class="line" id="L415"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> subscription_u_u_t = <span class="tok-kw">extern</span> <span class="tok-kw">union</span> {</span>
<span class="line" id="L416">    clock: subscription_clock_t,</span>
<span class="line" id="L417">    fd_read: subscription_fd_readwrite_t,</span>
<span class="line" id="L418">    fd_write: subscription_fd_readwrite_t,</span>
<span class="line" id="L419">};</span>
<span class="line" id="L420"></span>
<span class="line" id="L421"><span class="tok-comment">/// Nanoseconds.</span></span>
<span class="line" id="L422"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> timestamp_t = <span class="tok-type">u64</span>;</span>
<span class="line" id="L423"></span>
<span class="line" id="L424"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> userdata_t = <span class="tok-type">u64</span>;</span>
<span class="line" id="L425"></span>
<span class="line" id="L426"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> whence_t = <span class="tok-kw">enum</span>(<span class="tok-type">u8</span>) { SET, CUR, END };</span>
<span class="line" id="L427"></span>
</code></pre></body>
</html>